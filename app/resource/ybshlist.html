<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>田家园后台</title>

    <link href="../../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../../bower_components/fontawesome/css/font-awesome.min.css" rel="stylesheet">
    <!-- Toastr style -->
    <link href="../../bower_components/toastr/toastr.min.css" rel="stylesheet">

    <!-- Gritter -->
    <link href="../../bower_components/gritter/css/jquery.gritter.css" rel="stylesheet">
    <!-- sweetalert -->
    <link href="../../bower_components/sweetalert/dist/sweetalert.css" rel="stylesheet"/> 

    <link href="../styles/animate.css" rel="stylesheet">
    <link href="../styles/style.css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="../../bower_components/jqPagination/css/jqpagination.css">

</head>

<body>
    <div id="wrapper">
        <nav class="navbar-default navbar-static-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav" id="side-menu">
                    <li class="nav-header">
                        <div class="dropdown profile-element">
                            <span>
                                <img alt="image" class="img-circle" src="../images/profile_small.jpg" />
                            </span>
                            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                                <span class="text-muted text-xs block">张若凡 <b class="caret"></b></span> </span> </a>
                                <ul class="dropdown-menu animated fadeInRight m-t-xs">
                                    <li>
                                        <a href="profile.html">设置</a>
                                    </li>
                                    <li>
                                        <a href="contacts.html">联系</a>
                                    </li>
                                    <li>
                                        <a href="mailbox.html">邮箱</a>
                                    </li>
                                    <li class="divider"></li>
                                    <li>
                                        <a href="login.html">注销</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="logo-element">
                                MedLib
                            </div>
                        </li>
                        <li class="active">
                            <a href="#">
                                <i class="fa fa-th-large"></i> <span class="nav-label">资源管理</span> <span class="fa arrow"></span></a>
                                <ul class="nav nav-second-level">
                                    <li class="active">
                                        <a href="ybshlist.html">我的云板书</a>
                                    </li>
                                    <li>
                                        <a href="ybshupload.html">云板书上传</a>
                                    </li>
                                    <li >
                                        <a href="imglist.html">我的图片</a>
                                    </li>
                                    <li >
                                        <a href="imgupload.html">图片上传</a>
                                    </li>
                                    <li >
                                        <a href="videolist.html">我的视频</a>
                                     </li>
                                    <li>
                                        <a href="videoupload.html">视频上传</a>
                                    </li>
                                </ul>
                            </li>

                        </ul>

                    </div>
                </nav>

                <div id="page-wrapper" class="gray-bg dashbard-1">
                    <div class="row border-bottom">
                        <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
                            <div class="navbar-header">
                                <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#">
                                    <i class="fa fa-bars"></i>
                                </a>
                            </div>
                            <ul class="nav navbar-top-links navbar-right">
                                <li>
                                    <span class="m-r-sm text-muted welcome-message">欢迎来到田家园管理后台</span>
                                </li>
                                <li>
                                    <a href="login.html">
                                        <i class="fa fa-sign-out"></i> 注销
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>

                    <div class="row wrapper border-bottom white-bg page-heading">
                        <div class="col-lg-10">
                            <h2>资源列表</h2>
                            <ol class="breadcrumb">
                                <li>
                                    <a href="#">主页</a>
                                </li>
                                <li>
                                    <a>资源</a>
                                </li>
                                <li class="active">
                                    <strong>列表</strong>
                                </li>
                            </ol>
                        </div>
                    </div>

                    <div class="wrapper wrapper-content animated fadeInRight">
                        <div class="row" id="list">
                        </div>
                        <div class="pagination">
                            <a href="#" class="first" data-action="first">&laquo;</a>
                            <a href="#" class="previous" data-action="previous">&lsaquo;</a>
                            <input type="text" readonly="readonly"/>
                            <a href="#" class="next" data-action="next">&rsaquo;</a>
                            <a href="#" class="last" data-action="last">&raquo;</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Mainly scripts -->
            <script src="../../bower_components/jquery/dist/jquery.min.js"></script>
            <script src="../../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
            <script src="../../bower_components/metisMenu/dist/metisMenu.min.js"></script>
            <script src="../../bower_components/slimscroll/jquery.slimscroll.min.js"></script>
            <!-- Flot -->
            <!--<script src="../js/plugins/flot/jquery.flot.js"></script>
            <script src="../js/plugins/flot/jquery.flot.tooltip.min.js"></script>
            <script src="../js/plugins/flot/jquery.flot.spline.js"></script>
            <script src="../js/plugins/flot/jquery.flot.resize.js"></script>
            <script src="../js/plugins/flot/jquery.flot.pie.js"></script>-->

            <!-- Peity -->
            <!--<script src="../js/plugins/peity/jquery.peity.min.js"></script>
            <script src="../js/demo/peity-demo.js"></script>-->

            <!-- Custom and plugin javascript -->
            <script src="../scripts/inspinia.js"></script>
            <script src="../../bower_components/pace/pace.min.js"></script>

            <!-- jQuery UI -->
            <script src="../scripts/jquery-ui/jquery-ui.min.js"></script>

            <!-- GITTER -->
            <!--<script src="../js/plugins/gritter/jquery.gritter.min.js"></script>-->

            <!-- Sparkline -->
            <!--<script src="../js/plugins/sparkline/jquery.sparkline.min.js"></script>-->

            <!-- Sparkline demo data -->
            <!--<script src="../js/demo/sparkline-demo.js"></script>-->

            <!-- ChartJS-->
            <!--<script src="../js/plugins/chartJs/Chart.min.js"></script>-->

            <!-- Toastr -->
            <!--<script src="../js/plugins/toastr/toastr.min.js"></script>-->
            <!-- sweetalert -->
            <script src="../../bower_components/sweetalert/dist/sweetalert.min.js"></script>
            <script type="text/javascript" src="../scripts/abp-sweetalert.js"></script>
            <!--jqueryform-->
            <script src="../scripts/jQueryForm/jQueryForm.js" type="text/javascript"></script>
            <!--jqueryblockui-->
            <script type="text/javascript" src="../scripts/jQuery-blockUI/jquery.blockUI.min.js"></script>
            <script type="text/javascript" src="../scripts/jQuery-blockUI/abp.blockUI.js"></script>
            <!--spinjs-->
            <script type="text/javascript" src="../../bower_components/spin/javascripts/jquery.spin.js"></script>
            <script type="text/javascript" src="../scripts/abp.spin.js"></script>
            <!-- artTemplate -->
            <script type="text/javascript" src="../../bower_components/artTemplate/dist/template.js"></script>
            <script type="text/javascript" src="../../bower_components/jqPagination/js/jquery.jqpagination.min.js"></script>
            <script id="listTemplate" type="text/html">
                {{each list}}
                <div class="col-lg-4">
                    <div class="contact-box">
                        <a href="http://42.121.121.87:8000{{$value.dir}}" target='_blank'>
                            <div class="col-sm-4">
                                <div class="text-center">
                                    <img alt="image" class="m-t-xs img-responsive" src="../images/a6.jpg">
                                </div>
                            </div>
                            <div class="col-sm-8">
                                <h3><strong>{{$value.title}}</strong></h3>
                                <p>{{$value.remark}}</p>
                            </div>
                            <div class="clearfix"></div>
                        </a>
                    </div>
                </div>
                {{/each}}
            </script>
            <script type="text/javascript">
                function getRes (limit,offset) {
                    $.get('http://42.121.121.87:8001/Ress/list',{entity:'{"limit":'+limit+',"offset":'+offset+'}'}, function(data) {
                        /*optional stuff to do after success */
                        if(data.code==200&&data.list.length>0){
                            var html=template('listTemplate',data);
                            $('#list').empty().append(html);
                            $('.contact-box').each(function() {
                                animationHover(this, 'pulse');
                            });
                        }
                    });
                }
                function getCount() {
                    var count=0;
                    $.ajax({
                        url: 'http://42.121.121.87:8001/Ress/info?entity={}',
                        dataType: 'json',
                        async: false
                    })
                    .done(function(data) {
                        if(data.code==200)
                        {   
                            count=data.info.count;
                        }
                    })
                    .fail(function() {
                        console.log("error");
                    });
                    
                    return count;
                }
                $(document).ready(function() {
                    var limit=9;    
                    getRes(limit,1);
                    $('.pagination').jqPagination({
                        max_page:Math.ceil(getCount()/limit),
                        page_string :'第{current_page}页,共{max_page}页',
                        paged:function (page) {
                            getRes(limit,page);
                        }
                    });

                });
            </script>
        </body>
        </html>
